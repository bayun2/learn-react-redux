!function(t,e,n){function o(t,e){return this instanceof o?this.init(t,e):new o(t,e)}function r(t,e){return t.changedTouches?t.changedTouches[0][e]:t[e]}function i(t){return p(t,function(t){return P.style[t]!==n})}function a(t,e,o){var r=g[e];r?t[r]=o:t[e]!==n?(g[e]=e,t[e]=o):p(y,function(r){var i=h(r)+h(e);return t[i]!==n?(g[e]=i,t[i]=o,!0):void 0})}function s(t){for(var e=[],n=0,o=t.length;o>n;n++)u(t[n])&&e.push(t[n]);return e}function u(t){return!!t.getAttribute("lazy-src")}function c(t){var e=t.getAttribute("lazy-src"),n=t.getAttribute("lazy-srcset"),o=t.getAttribute("seted-lazy-src"),r=_.srcset&&n,i=r?n:e;i&&o!=i&&(t[r?"srcset":"src"]=r?n:e,t.setAttribute("seted-lazy-src",i))}function m(t,e){var n=new Image,o=t.getAttribute("lazy-src"),r=t.getAttribute("lazy-srcset"),i=_.srcset&&r,a=i?r:o;a&&!w[a]?(n.onload=n.onerror=e,n[i?"srcset":"src"]=i?r:o,w[a]=!0):e()}function l(e){var n=e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):t.getComputedStyle(e,null),o=Number((n.marginLeft||n["margin-left"]||"").slice(0,-2)),r=Number((n.marginRight||n["margin-right"]||"").slice(0,-2));return e.offsetWidth+o+r}function f(t){if(P.style[t]!==n)return t;var e;return p(y,function(o){var r=h(o)+h(t);return P.style[r]!==n?(e="-"+o+"-"+t,!0):void 0}),e}function h(t){return t.charAt(0).toUpperCase()+t.substr(1)}function p(t,e){for(var n=0,o=t.length;o>n;n++)if(e(t[n],n))return!0;return!1}function d(t,e,n,o){var r=Math.abs(t-n),i=Math.abs(e-o),a=Math.sqrt(Math.pow(r,2)+Math.pow(i,2));return{x:r,y:i,z:a}}function v(t){var e=t.y/t.z,n=Math.acos(e);return 180/(Math.PI/n)}var P=e.createElement("div"),y=["webkit","moz","o","ms"],g={},_=o.support={},T=!1,b=5,L=55;_.transform3d=i(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]),_.transform=i(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"]),_.transition=i(["transitionProperty","WebkitTransitionProperty","MozTransitionProperty","OTransitionProperty","msTransitionProperty"]),_.srcset="undefined"!=typeof(new Image).srcset,_.addEventListener="addEventListener"in t,_.mspointer=t.navigator.msPointerEnabled,_.cssAnimation=_.transform3d&&_.transition;for(var E=t.requestAnimationFrame,x=0;x<y.length&&!E;++x)E=t[y[x]+"RequestAnimationFrame"];E||(E=function(t){t()});var A=["touch","mouse"],X={start:{touch:"touchstart",mouse:"mousedown"},move:{touch:"touchmove",mouse:"mousemove"},end:{touch:"touchend",mouse:"mouseup"}};_.addEventListener&&(e.addEventListener("gesturestart",function(){T=!0}),e.addEventListener("gestureend",function(){T=!1})),o.prototype.init=function(t,o){var r=this;if(r.element=t,"string"==typeof t&&(r.element=e.querySelector(t)),!r.element)throw new Error("element not found");return _.mspointer&&(r.element.style.msTouchAction="pan-y"),o=r.opts=o||{},r.distance=n,r.disableTouch=o.disableTouch===n?!1:o.disableTouch,r.disableCssTransition=o.disableCssTransition===n?!1:o.disableCssTransition,r.disable3d=o.disable3d===n?!1:o.disable3d,r.transitionDuration=o.transitionDuration===n?350:o.transitionDuration,r.loop=!!o.loop,r.autoPlayDuration=isNaN(o.autoPlayDuration)?4e3:Number(o.autoPlayDuration),r.enableAutoPlay=o.enableAutoPlay===n?!1:o.enableAutoPlay,r.itemWidth=isNaN(o.itemWidth)?null:Number(o.itemWidth),r.currentPoint=0,r._currentPoint=0,r.maxPoint=n,r._maxPoint=n,r.currentX=0,r.animation=!1,r.use3d=_.transform3d,r.disable3d===!0&&(r.use3d=!1),_.cssAnimation?r._setStyle({transitionProperty:f("transform"),transitionTimingFunction:"cubic-bezier(0,0,0.5,1)",transitionDuration:"0ms",transform:r._getTranslate(0)}):r._setStyle({position:"relative",left:"0px"}),r.refresh(),A.forEach(function(t){r.element.addEventListener(X.start[t],r,!1)}),r},o.prototype.handleEvent=function(t){var e=this;switch(t.type){case X.start.touch:e._touchStart(t,"touch");break;case X.start.mouse:e._touchStart(t,"mouse");break;case X.move.touch:e._touchMove(t,"touch");break;case X.move.mouse:e._touchMove(t,"mouse");break;case X.end.touch:e._touchEnd(t,"touch");break;case X.end.mouse:e._touchEnd(t,"mouse");break;case"click":e._click(t)}},o.prototype.refresh=function(){var t=this;t.pauseAutoPlay(),t.firstLoopFaker&&(t.element.removeChild(t.firstLoopFaker),t.firstLoopFaker=null),t.lastLoopFaker&&(t.element.removeChild(t.lastLoopFaker),t.lastLoopFaker=null);var e=t.items=function(){for(var e,n=t.element.childNodes,o=0,r=n.length,i=[];r>o;o++)e=n[o],1===e.nodeType&&i.push(e);return i}();if(t.itemLength=t._itemLength=e.length,t.maxPoint=t._maxPoint=t.opts.maxPoint===n?t._itemLength-1:t.opts.maxPoint,t.loop){var o=t.element.firstElementChild,r=t.element.lastElementChild;t.firstLoopFaker=o.cloneNode(!0),t.lastLoopFaker=r.cloneNode(!0),t.element.appendChild(t.firstLoopFaker),t.element.insertBefore(t.lastLoopFaker,t.element.firstElementChild),t._itemLength=0===t._itemLength?0:t._itemLength+2,t._maxPoint=t._maxPoint<0?t._maxPoint:t._maxPoint+2,e.push(t.firstLoopFaker),e.unshift(t.lastLoopFaker)}t.scrollWidth=e.length<1?0:t._itemLength*(t.itemWidth||l(e[0])),t.element.style.width=t.scrollWidth+"px",t.updateDistance();for(var i=t.itemImgs=[],a=0,u=e.length;u>a;a++){var c=e[a].getElementsByTagName("img");i[a]=s(c)}t._maxX=-t._distance*t._maxPoint,t.moveToPoint(t.currentPoint||0,0),t.isAutoPlayEnable()&&t.resumeAutoPlay()},o.prototype.updateDistance=function(){var t=this;t.opts.distance===n?t._maxPoint<0?t._distance=0:t._distance=t.scrollWidth/(t._maxPoint+1):t._distance=t.opts.distance},o.prototype.hasNext=function(){return this.loop?!0:this.currentPoint<this.maxPoint},o.prototype.hasPrev=function(){return this.loop?!0:this.currentPoint>0},o.prototype.toNext=function(t){var e=this;e.hasNext()&&(e.loop&&e.currentPoint>=e.maxPoint?(e.animation=!1,e._setStyle({transitionDuration:"0ms"}),setTimeout(function(){e._setX(0,0),setTimeout(function(){e.moveToPoint(0,t)},10)},10)):e.moveToPoint(e.currentPoint+1,t))},o.prototype.toPrev=function(t){var e=this;e.hasPrev()&&(e.loop&&0===e.currentPoint?(e.animation=!1,e._setStyle({transitionDuration:"0ms"}),setTimeout(function(){e._setX(e._maxX,0),setTimeout(function(){e.moveToPoint(e.maxPoint,t)},10)},10)):e.moveToPoint(e.currentPoint-1,t))},o.prototype._realPointToUserPoint=function(t){return this.loop?1>t?self.maxPoint:t-1:t},o.prototype._userPointToRealPoint=function(t){return this.loop?t+1:t},o.prototype.moveToPoint=function(t,e,o){var r=this;t===n?t=r.currentPoint:0>t||isNaN(t)?t=0:t>r.maxPoint&&(t=r.maxPoint),r._moveToPoint(r.loop?t+1:t,e,o)},o.prototype._moveToPoint=function(t,e,o){var r=this;clearTimeout(r._moveendTimeout),clearTimeout(r._autoPlayTimeout);var i=r._realPointToUserPoint(t),a=r.currentPoint;r._currentPoint;o||(r._triggerEvent("fsmovestart",!0,!1),r.showItemLazyImgs(i)),e=e===n?r.transitionDuration:e,r.currentPoint=i,r._currentPoint=t;var s={moved:a!==r.currentPoint,originalPoint:a,newPoint:r.currentPoint},u=function(){r._triggerEvent("fsmoveend",!0,!1,s),r.isAutoPlayEnable()&&r.resumeAutoPlay(),o&&r.showItemLazyImgs(i);var t=(i+1)%r.itemLength;setTimeout(function(){r.nextImgLazyDfd=r.loadItemLazyImgs(t,function(){r.showItemLazyImgs(t)})},100/6)};_.cssAnimation&&!r.disableCssTransition?(r._setStyle({transitionDuration:e+"ms"}),r._moveendTimeout=setTimeout(u,e)):0!==e&&(r.animation=!0),r._setX(-r._currentPoint*r._distance,e,u),s.moved&&r._triggerEvent("fspointmove",!0,!1,s)},o.prototype._setX=function(t,e,n){var o=this;o.animation?_.cssAnimation&&!o.disableCssTransition?(o.element.style[g.transform]=o._getTranslate(t),o.currentX=t):o._animate(t,e||o.transitionDuration,n):(_.cssAnimation?o.element.style[g.transform]=o._getTranslate(t):o.element.style.left=t+"px",o.currentX=t)},o.prototype._touchStart=function(t,n){var o=this;if(!(o.disableTouch||o.scrolling||T)){clearInterval(o._animateTimer),clearTimeout(o._moveendTimeout),o.pauseAutoPlay(),o.nextImgLazyDfd&&o.nextImgLazyDfd.reject(),o.element.addEventListener(X.move[n],o,!1),e.addEventListener(X.end[n],o,!1);var i=t.target.tagName;"mouse"===n&&"SELECT"!==i&&"INPUT"!==i&&"TEXTAREA"!==i&&"BUTTON"!==i&&t.preventDefault(),_.cssAnimation&&o._setStyle({transitionDuration:"0ms"}),o.animation=!1,o.scrolling=!0,o.moveReady=!1,o.startPageX=r(t,"pageX"),o.startPageY=r(t,"pageY"),o.basePageX=o.startPageX,o.directionX=0,o.startTime=t.timeStamp,o._triggerEvent("fstouchstart",!0,!1),o.showItemLazyImgs((o.currentPoint+1)%o.itemLength),o.loop&&o.showItemLazyImgs((o.itemLength+o.currentPoint-1)%o.itemLength)}},o.prototype._touchMove=function(t,e){var o=this;if(o.scrolling&&!T){var i,a,s,u=r(t,"pageX"),c=r(t,"pageY");if(o.moveReady){if(t.preventDefault(),i=u-o.basePageX,a=o.currentX+i,(a>=0||a<o._maxX)&&(a=Math.round(o.currentX+i/3)),s=o.directionX=0===i?o.directionX:i>0?-1:1,o.loop){var m=-1*o._distance,l=-1*o._distance*(o._itemLength-2);-1==s?o.currentX<=m&&a>m?a=o._maxX+a-m:o.currentX>m&&a>=0&&(a=l+a):1==s&&(o.currentX>=l&&l>a?a=0+a-l:o.currentX<l&&a<=o._maxX&&(a=m+a-o._maxX))}var f=!o._triggerEvent("fstouchmove",!0,!0,{delta:i,direction:o.directionX});o._triggerEvent("fsmove",!0,!0,{absoluteX:a}),f?o._touchAfter({moved:!1,originalPoint:o.currentPoint,newPoint:o.currentPoint,cancelled:!0}):o._setX(a)}else{var h=d(o.startPageX,o.startPageY,u,c);h.z>b&&(v(h)>L?(t.preventDefault(),o.moveReady=!0,o.element.addEventListener("click",o,!0),o._triggerEvent("fsmovestart",!0,!1),o.loadItemLazyImgs((o.currentPoint+o.directionX)%o.itemLength)):(o._touchAfter({moved:!1,originalPoint:o.currentPoint,newPoint:o.currentPoint}),_.cssAnimation&&!o.disableCssTransition||-1*o.currentPoint*o._distance==o.currentX||o.moveToPoint(n,n,!0),o.isAutoPlayEnable()&&o.resumeAutoPlay()))}o.basePageX=u}},o.prototype._touchEnd=function(t,o){var r=this;if(r.element.removeEventListener(X.move[o],r,!1),e.removeEventListener(X.end[o],r,!1),r.scrolling){var i,a=-r.currentX/r._distance;a=r.directionX>0?Math.ceil(a):r.directionX<0?Math.floor(a):Math.round(a),0>a?a=0:a>r._maxPoint&&(a=r._maxPoint),i=r._realPointToUserPoint(a),r._touchAfter({moved:i!==r.currentPoint,originalPoint:r.currentPoint,newPoint:i,cancelled:!1}),r._moveToPoint(a,n,!0)}},o.prototype._click=function(t){t.stopPropagation(),t.preventDefault()},o.prototype._touchAfter=function(t){var e=this;e.scrolling=!1,e.moveReady=!1,setTimeout(function(){e.element.removeEventListener("click",e,!0)},200),e._triggerEvent("fstouchend",!0,!1,t)},o.prototype.isAutoPlayEnable=function(){return this.enableAutoPlay&&this.itemLength>1},o.prototype.autoPlay=function(){return this.enableAutoPlay=!0,this.resumeAutoPlay()},o.prototype.cancleAutoPlay=function(){return this.enableAutoPlay=!1,this.pauseAutoPlay()},o.prototype.pauseAutoPlay=function(){return clearTimeout(this._autoPlayTimeout),this},o.prototype.resumeAutoPlay=function(){var t=this;if(t.isAutoPlayEnable()){var e=((t.currentPoint+1)%t.itemLength,2),n=function(){0===--e&&E(function(){t._autoPlayTimeout=setTimeout(function(){t.hasNext()?t.toNext():t.moveToPoint(0)},t.autoPlayDuration/3)})};t.nextImgLazyDfd?t.nextImgLazyDfd.always(n):n(),clearTimeout(t._autoPlayTimeout),t._autoPlayTimeout=setTimeout(n,2*t.autoPlayDuration/3)}return this},o.prototype._setStyle=function(t){var e=this,n=e.element.style;for(var o in t)a(n,o,t[o])},o.prototype._animate=function(t,e,n){var o=this,r=o.element,i=+new Date,s=o.currentX,u=t,c=e,m=function(t,e){return-(t/=e)*(t-2)};o._animateTimer=setInterval(function(){var t,e,l=new Date-i;l>c?(clearInterval(o._animateTimer),e=u,setTimeout(function(){"function"==typeof n&&n()},100/6)):(t=m(l,c),e=t*(u-s)+s),_.cssAnimation?a(r.style,"transform",o._getTranslate(e)):r.style.left=e+"px",o.currentX=e,o._triggerEvent("fsmove",!0,!0,{absoluteX:e})},100/6)},o.prototype.destroy=function(){var t=this;A.forEach(function(e){t.element.removeEventListener(X.start[e],t,!1)})},o.prototype._getTranslate=function(t){var e=this;return e.use3d?"translate3d("+t+"px, 0, 0)":"translate("+t+"px, 0)"},o.prototype._triggerEvent=function(t,n,o,r){var i=this,a=e.createEvent("Event");if(a.initEvent(t,n,o),r)for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s]);return i.element.dispatchEvent(a)},o.prototype.setStyle=a,o.prototype.showItemLazyImgs=function(t){var e=this,n=e._userPointToRealPoint(t),o=e.itemImgs[n];if(o&&o.length){e.loop&&(0==t&&(o=o.concat(e.itemImgs[e._itemLength-1])),t==e.itemLength-1&&(o=o.concat(e.itemImgs[0])));for(var r=0,i=o.length;i>r;r++)c(o[r])}},o.prototype.loadItemLazyImgs=function(t,e){var n=this,o=n._userPointToRealPoint(t),r=n.itemImgs[o];if(r&&r.length){var i=r.length,a={status:"padding",callbacks:[],status:function(){return status},reject:function(){this.status="fail"},always:function(t){"function"==typeof t&&("success"==this.status||"fail"==this.status?t():this.callbacks.push(t))}};a.always(e);for(var s=0,u=r.length;u>s;s++)m(r[s],function(){if(0==--i&&"fail"!=a.status){a.status="success";for(var t=0,e=a.callbacks.length;e>t;t++)a.callbacks[t]()}});return a}};var w={};"object"==typeof exports?module.exports=o:"function"==typeof define&&define.amd?define(function(){return o}):t.Flipsnap=o}(window,window.document);